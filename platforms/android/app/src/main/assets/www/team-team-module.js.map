{"version":3,"sources":["./src/app/presentation/team.guard.ts","./src/app/presentation/team/team.module.ts","./src/app/presentation/team/team-routing.module.ts"],"names":[],"mappings":"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","file":"team-team-module.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport {\r\n  ActivatedRouteSnapshot,\r\n  CanActivate,\r\n  Router,\r\n  RouterStateSnapshot,\r\n  UrlTree,\r\n} from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { first } from 'rxjs/operators';\r\nimport { UserService } from '../core/services/user.service';\r\nimport { LogApiService } from '../shared/http/services/log-api.service';\r\nimport { AuthService } from './auth/auth.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class TeamGuard implements CanActivate {\r\n  constructor(\r\n    private $router: Router,\r\n    private $auth: AuthService,\r\n    private _user: UserService,\r\n    private $logApi: LogApiService\r\n  ) {}\r\n\r\n  public canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ):\r\n    | Observable<boolean | UrlTree>\r\n    | Promise<boolean | UrlTree>\r\n    | boolean\r\n    | UrlTree {\r\n    if (this._user.label.labelGroups.length) {\r\n      return true;\r\n    } else {\r\n      if (Array.isArray(route.url) && route.url.length > 0) {\r\n        this.$logApi\r\n          .putLogData({\r\n            loggerName: 'customSecurity',\r\n            message: `Attempt to open forbidden component - ${route.url[0].path}`,\r\n          })\r\n          .pipe(first())\r\n          .subscribe((res) => {});\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CoreModule } from '@core/core.module';\r\nimport { TeamRoutingModule } from '@presentation/team/team-routing.module';\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [\r\n    CoreModule.forChild(),\r\n    TeamRoutingModule,\r\n  ]\r\n})\r\nexport class TeamModule {\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { TeamGuard } from '../team.guard';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: 'profiles',\r\n    children: [\r\n      {\r\n        path: ':userId',\r\n        loadChildren: () =>\r\n          import('./team-profile/team-profile.module').then(\r\n            ({ TeamProfileModule }) => TeamProfileModule\r\n          ),\r\n      },\r\n      {\r\n        path: '',\r\n        pathMatch: 'full',\r\n        loadChildren: () =>\r\n          import('./team-profiles/team-profiles.module').then(\r\n            ({ TeamProfilesModule }) => TeamProfilesModule\r\n          ),\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    path: 'requests',\r\n    loadChildren: () =>\r\n      import('./team-requests/team-requests.module').then(\r\n        ({ TeamRequestsModule }) => TeamRequestsModule\r\n      ),\r\n    canActivate: [TeamGuard],\r\n  },\r\n  {\r\n    path: 'reservations',\r\n    children: [\r\n      {\r\n        path: 'create',\r\n        loadChildren: () =>\r\n          import('./team-create/team-create.module').then(\r\n            ({ TeamCreateModule }) => TeamCreateModule\r\n          ),\r\n        data: {\r\n          title: 'Бронирование',\r\n        },\r\n      },\r\n      {\r\n        path: ':type',\r\n        loadChildren: () =>\r\n          import('./team-reservations/team-reservations.module').then(\r\n            ({ TeamReservationsModule }) => TeamReservationsModule\r\n          ),\r\n        data: {},\r\n      },\r\n      {\r\n        path: '',\r\n        pathMatch: 'full',\r\n        redirectTo: 'workplace',\r\n      },\r\n    ],\r\n    canActivate: [TeamGuard],\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class TeamRoutingModule {}\r\n"],"sourceRoot":"webpack:///"}