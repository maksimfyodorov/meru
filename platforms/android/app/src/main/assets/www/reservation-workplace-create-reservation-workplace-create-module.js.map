{"version":3,"sources":["./src/app/base/reservation-workplace/reservation-workplace.component.ts","./src/app/base/reservation-workplace/reservation-workplace.component.html","./src/app/presentation/reservations/reservation-workplace-create/reservation-workplace-create.module.ts","./src/app/presentation/reservations/reservation-workplace-create/reservation-workplace-create-routing.module.ts","./src/app/presentation/reservations/reservation-workplace-create/components/create/create.component.ts","./src/app/presentation/reservations/reservation-workplace-create/components/create/create.component.html","./src/app/presentation/reservations/reservation-workplace-create/components/create/create.service.ts","./src/app/base/reservation-workplace/reservation-workplace.module.ts"],"names":[],"mappings":"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","file":"reservation-workplace-create-reservation-workplace-create-module.js","sourcesContent":["import {\r\n  Component,\r\n  OnInit,\r\n  ChangeDetectionStrategy,\r\n  Input,\r\n  EventEmitter,\r\n  Output,\r\n} from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { IWorkplace } from '@src/app/shared/http/models/database.model';\r\nimport { DEFAULT_WORKPLACE_CARD } from '@src/app/shared/http/utils/images.const';\r\nimport { IDescription } from '../card/card.model';\r\n\r\n@Component({\r\n  selector: 'app-reservation-workplace',\r\n  templateUrl: './reservation-workplace.component.html',\r\n  styleUrls: ['./reservation-workplace.component.less'],\r\n})\r\nexport class ReservationWorkplaceComponent implements OnInit {\r\n  @Input() events: any[] = [];\r\n  @Input() descriptionList: IDescription[] = [];\r\n  @Input() workplace: IWorkplace = null;\r\n  @Input() tags: string[] = [];\r\n  @Input() isLoading = false;\r\n  @Input() mode: 'month' | 'day' = 'month';\r\n\r\n  @Output()\r\n  public reservation: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output()\r\n  public monthSelect: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  imageUrl: string = DEFAULT_WORKPLACE_CARD;\r\n\r\n  constructor(private router: Router) {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  monthSelectHandler(ev): void {\r\n    this.monthSelect.emit(ev);\r\n  }\r\n\r\n  eventHandler(ev): void {\r\n    if (ev.id === undefined) {\r\n      this.reservation.emit({\r\n        start: ev.start,\r\n        end: ev.end,\r\n        id: this.workplace.id,\r\n      });\r\n    } else if (ev.appointmentId) {\r\n      this.router.navigate([\r\n        '/reservations/appointment/view/' +\r\n          encodeURIComponent(ev.appointmentId),\r\n      ]);\r\n    }\r\n  }\r\n}\r\n","<div class=\"reservation\">\r\n  <div class=\"reservation__card\">\r\n    <app-card\r\n      *ngIf=\"workplace\"\r\n      [title]=\"workplace.name\"\r\n      [image]=\"imageUrl | imageBlob | async\"\r\n      [descriptionList]=\"descriptionList\"\r\n      [tags]=\"tags\"\r\n    >\r\n    </app-card>\r\n  </div>\r\n  <div class=\"reservation__main\">\r\n    <div class=\"reservation__block _calendar\">\r\n      <app-calendar\r\n        [modes]=\"['month', 'day']\"\r\n        [mode]=\"mode\"\r\n        [loading]=\"isLoading\"\r\n        [events]=\"events\"\r\n        [disablePast]=\"true\"\r\n        [allowSelectEmptyDay]=\"true\"\r\n        [allowSelectDayEvent]=\"true\"\r\n        [allowSelectMonthEvent]=\"true\"\r\n        (eventSelect)=\"eventHandler($event)\"\r\n        (periodChange)=\"monthSelectHandler($event)\"\r\n      ></app-calendar>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FiltersModule } from '@base/filters/filters.module';\r\nimport { ReservationWorkplaceCreateRoutingModule } from './reservation-workplace-create-routing.module';\r\nimport { CreateComponent } from './components/create/create.component';\r\nimport { ReservationWorkplaceModule } from '@src/app/base/reservation-workplace/reservation-workplace.module';\r\nimport { DatePipe } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule, TranslatePipe } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n  declarations: [CreateComponent],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReservationWorkplaceCreateRoutingModule,\r\n    ReservationWorkplaceModule,\r\n    FiltersModule,\r\n    TranslateModule,\r\n  ],\r\n  providers: [DatePipe, TranslatePipe],\r\n})\r\nexport class ReservationWorkplaceCreateModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { CreateComponent } from './components/create/create.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: ':workplaceId',\r\n    pathMatch: 'full',\r\n    component: CreateComponent,\r\n    data: {\r\n      title: 'Переговорная комната',\r\n    },\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ReservationWorkplaceCreateRoutingModule {}\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  TemplateRef,\r\n  ViewChild,\r\n  OnDestroy,\r\n} from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { TranslatePipe } from '@ngx-translate/core';\r\nimport { IDescription } from '@src/app/base/card/card.model';\r\nimport { IListRows } from '@src/app/base/list/models/list.model';\r\nimport { Subscribe } from '@src/app/core/decorators/subscribe.decorator';\r\nimport { GlobalLoaderService } from '@src/app/core/services/global-loader.service';\r\nimport { StatusesService } from '@src/app/shared/dictionaries/services/statuses.service';\r\nimport { IBuilding, IRoom } from '@src/app/shared/http/models/database.model';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { first } from 'rxjs/operators';\r\nimport { CreateService } from './create.service';\r\n// @Kholodov отрефакторить для разных типов\r\n@Component({\r\n  selector: 'app-create',\r\n  templateUrl: './create.component.html',\r\n  styleUrls: ['./create.component.less'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  providers: [CreateService],\r\n})\r\nexport class CreateComponent implements OnInit, OnDestroy {\r\n  workplace: IRoom;\r\n  reservationAllowedFrom: number[] = [6, 0];\r\n  reservationAllowedTo: number[] = [23, 0];\r\n  reservetions: any[];\r\n  descriptionList: IDescription[];\r\n  tags: string[];\r\n  dataBusy: IListRows = [];\r\n  data: IListRows = [];\r\n  dateTimeFrom: Date;\r\n  dateTimeTo: Date;\r\n\r\n  reservations: Record<string, Array<any>> = {};\r\n\r\n  workHours = [];\r\n  minDuration: number;\r\n\r\n  @Subscribe<string>()\r\n  dateTimeFormat;\r\n\r\n  dateTimeFromControl: FormControl;\r\n  dateTimeToControl: FormControl;\r\n  wrongRange = false;\r\n\r\n  @ViewChild('modalTitleTpl') modalTitleTpl: TemplateRef<any>;\r\n  @ViewChild('modalContentTpl') modalContentTpl: TemplateRef<any>;\r\n  @ViewChild('modalFooterTpl') modalFooterTpl: TemplateRef<any>;\r\n  @ViewChild('reservationModalTpl') reservationModalTpl: TemplateRef<any>;\r\n\r\n  now = new Date();\r\n  mode: 'month' | 'day' = 'month';\r\n\r\n  isLoading = false;\r\n\r\n  constructor(\r\n    private _service: CreateService,\r\n    private _cdr: ChangeDetectorRef,\r\n    private _loader: GlobalLoaderService,\r\n    private _statuses: StatusesService,\r\n    private _modal: NzModalService,\r\n    private _translate: TranslatePipe,\r\n    private route: ActivatedRoute\r\n  ) {}\r\n\r\n  ngOnDestroy(): void {}\r\n\r\n  ngOnInit(): void {\r\n    this.mode = this.route.snapshot.queryParams.mode || 'month';\r\n    this.dateTimeFromControl = new FormControl(new Date());\r\n    this.dateTimeToControl = new FormControl(new Date());\r\n    this.dateTimeFormat = this._service.dateTimeFormat$;\r\n    this.workHours = [0, 24];\r\n    this.minDuration = 1000 * 60 * 15;\r\n    this.reservations = {\r\n      success: [],\r\n      errors: [],\r\n    };\r\n    let dateFrom = new Date();\r\n    dateFrom.setDate(0);\r\n    dateFrom.setHours(0);\r\n    dateFrom.setMinutes(0);\r\n    let dateTo = new Date(dateFrom);\r\n    dateTo.setMonth(dateTo.getMonth() + 1);\r\n    this.updateDate(dateFrom, dateTo);\r\n  }\r\n\r\n  monthSelectHandler(ev) {\r\n    this.updateDate(new Date(ev[0]), new Date(ev[1]));\r\n  }\r\n\r\n  updateDate(dateFrom: Date, dateTo: Date) {\r\n    // this._service.workplace$\r\n    this.isLoading = true;\r\n    this._service\r\n      .getWorkplace$(dateFrom > this.now ? dateFrom : this.now, dateTo)\r\n      .pipe(first())\r\n      .subscribe(({ workplace, tags, floor, appointments, building }) => {\r\n        this.isLoading = false;\r\n        this.workplace = workplace;\r\n        if (this.workplace.reservationAllowedFrom) {\r\n          this.reservationAllowedFrom = this.workplace.reservationAllowedFrom\r\n            .split(':')\r\n            .map((val) => +val);\r\n        } else if (building && building.workDayBeginHour) {\r\n          this.reservationAllowedFrom = [building.workDayBeginHour, 0];\r\n        }\r\n        if (this.workplace.reservationAllowedTo) {\r\n          this.reservationAllowedTo = this.workplace.reservationAllowedTo\r\n            .split(':')\r\n            .map((val) => +val);\r\n        } else if (building && building.workDayEndHour) {\r\n          this.reservationAllowedTo = [building.workDayEndHour, 0];\r\n        }\r\n        this.tags = tags;\r\n        this.descriptionList = [\r\n          {\r\n            name: this._translate.transform('Description'),\r\n            value: workplace.description,\r\n          },\r\n          {\r\n            name: this._translate.transform('Place count'),\r\n            value: String(workplace.seatCount),\r\n          },\r\n          {\r\n            name: this._translate.transform('Building'),\r\n            value: floor.name,\r\n          },\r\n        ];\r\n        this.dataBusy = [];\r\n        if (Array.isArray(appointments)) {\r\n          appointments = appointments.filter((a) => {\r\n            let aStart = new Date(a.appointmentDateFrom);\r\n            let aEnd = new Date(a.appointmentDateTo);\r\n            if (aStart.getHours() >= this.reservationAllowedFrom[0]) {\r\n              if (aEnd.getHours() <= this.reservationAllowedTo[0]) {\r\n                return true;\r\n              }\r\n            }\r\n            return false;\r\n          });\r\n          this.dataBusy = appointments.map((item, index) => ({\r\n            id: index + 1,\r\n            appointmentId: item.appointmentId,\r\n            start: new Date(item.appointmentDateFrom),\r\n            end: new Date(item.appointmentDateTo),\r\n            title: `${this._translate.transform('Busy')} ${new Date(\r\n              item.appointmentDateFrom\r\n            ).toLocaleTimeString([], {\r\n              hour: '2-digit',\r\n              minute: '2-digit',\r\n            })} - ${new Date(item.appointmentDateTo).toLocaleTimeString([], {\r\n              hour: '2-digit',\r\n              minute: '2-digit',\r\n            })}`,\r\n            data: item,\r\n            cssClass: 'calendar-busy-area-room',\r\n          }));\r\n        }\r\n        this.addEmptyZones();\r\n      });\r\n  }\r\n\r\n  addEmptyZones() {\r\n    this.dataBusy.sort((a, b) => +a.start - +b.start);\r\n    this.data = [...this.dataBusy];\r\n    let now = new Date();\r\n    let year = new Date();\r\n    year.setFullYear(year.getFullYear() + 1);\r\n    year.setHours(this.reservationAllowedTo[0]);\r\n    year.setMinutes(this.reservationAllowedTo[1]);\r\n    year.setSeconds(0);\r\n\r\n    while (year > now) {\r\n      if (now.getHours() < this.reservationAllowedFrom[0]) {\r\n        now.setHours(this.reservationAllowedFrom[0]);\r\n        now.setMinutes(this.reservationAllowedFrom[1]);\r\n      }\r\n      let _start = new Date(now);\r\n      let _end = new Date(now);\r\n      _end.setHours(this.reservationAllowedTo[0]);\r\n      _end.setMinutes(this.reservationAllowedTo[1]);\r\n      _end.setSeconds(0);\r\n\r\n      let partsDay = this.dataBusy.filter((d) => {\r\n        let __start = new Date(_start);\r\n        __start.setHours(0);\r\n        __start.setMinutes(0);\r\n        __start.setSeconds(0);\r\n        let __end = new Date(_end);\r\n        __end.setHours(23);\r\n        __end.setMinutes(59);\r\n        __end.setSeconds(0);\r\n        return +d.start + 1000 * 60 >= +__start && +d.end - 1000 * 60 < +__end;\r\n      });\r\n      let fullDay = partsDay.find(\r\n        (d) =>\r\n          d.start.getHours() <= this.reservationAllowedFrom[0] &&\r\n          d.end.getHours() >= this.reservationAllowedTo[0]\r\n      );\r\n      if (fullDay) {\r\n        now.setDate(now.getDate() + 1);\r\n        now.setHours(this.reservationAllowedFrom[0]);\r\n        now.setMinutes(this.reservationAllowedFrom[1]);\r\n        now.setSeconds(0);\r\n        continue;\r\n      }\r\n\r\n      if (partsDay.length === 0) {\r\n        this.addFreeZone(_start, _end);\r\n      } else if (partsDay.length === 1) {\r\n        _end = new Date(partsDay[0].start);\r\n        this.addFreeZone(_start, _end);\r\n        _start = new Date(partsDay[0].end);\r\n        _end = new Date(now);\r\n        _end.setHours(this.reservationAllowedTo[0]);\r\n        _end.setMinutes(this.reservationAllowedTo[1]);\r\n        _end.setSeconds(0);\r\n        this.addFreeZone(_start, _end);\r\n      } else {\r\n        for (let i = 0; i < partsDay.length; i++) {\r\n          if (i === 0) {\r\n            if (_start < new Date(partsDay[i].start)) {\r\n              _end = new Date(partsDay[i].start);\r\n              this.addFreeZone(_start, _end);\r\n            }\r\n          } else if (i === partsDay.length - 1) {\r\n            if (i > 0) {\r\n              _start = new Date(partsDay[i - 1].end);\r\n              _end = new Date(partsDay[i].start);\r\n              this.addFreeZone(_start, _end);\r\n            }\r\n            _start = new Date(partsDay[i].end);\r\n            _end = new Date(now);\r\n            _end.setHours(this.reservationAllowedTo[0]);\r\n            _end.setMinutes(this.reservationAllowedTo[1]);\r\n            _end.setSeconds(0);\r\n            if (_end > new Date(partsDay[i].end)) {\r\n              this.addFreeZone(_start, _end);\r\n            }\r\n          } else {\r\n            _start = new Date(partsDay[i - 1].end);\r\n            _end = new Date(partsDay[i].start);\r\n            this.addFreeZone(_start, _end);\r\n          }\r\n        }\r\n      }\r\n\r\n      if (this.reservationAllowedFrom[0] > 6) {\r\n        let __start = new Date(_start);\r\n        __start.setHours(6);\r\n        __start.setMinutes(0);\r\n        __start.setSeconds(0);\r\n        let __end = new Date(_start);\r\n        __end.setHours(this.reservationAllowedFrom[0]);\r\n        __end.setMinutes(this.reservationAllowedFrom[1]);\r\n        __end.setSeconds(0);\r\n        this.data.push({\r\n          id: null,\r\n          start: new Date(__start),\r\n          end: new Date(__end),\r\n          cssClass: 'calendar-disabled-area',\r\n          meta: {\r\n            incrementsBadgeTotal: false,\r\n            showOnMonthView: false,\r\n          },\r\n        });\r\n      }\r\n      if (this.reservationAllowedTo[0] < 23) {\r\n        let __end = new Date(_end);\r\n        __end.setHours(23);\r\n        __end.setMinutes(0);\r\n        __end.setSeconds(0);\r\n        this.data.push({\r\n          id: null,\r\n          start: new Date(_end),\r\n          end: new Date(__end),\r\n          cssClass: 'calendar-disabled-area',\r\n          meta: {\r\n            incrementsBadgeTotal: false,\r\n            showOnMonthView: false,\r\n          },\r\n        });\r\n      }\r\n\r\n      now.setDate(now.getDate() + 1);\r\n      now.setHours(this.reservationAllowedFrom[0]);\r\n      now.setMinutes(this.reservationAllowedFrom[1]);\r\n      now.setSeconds(0);\r\n    }\r\n    this.data.sort((a, b) => +a.start - +b.start);\r\n    this._cdr.markForCheck();\r\n    this._loader.contentLoading$.next(false);\r\n    this._cdr.detectChanges();\r\n  }\r\n\r\n  addFreeZone(start: Date, end: Date) {\r\n    if (+start < +end - this.minDuration) {\r\n      this.data.push({\r\n        // title: `${this._translate.transform('Free')} ${new Date(\r\n        //   start\r\n        // ).toLocaleTimeString([], {\r\n        //   hour: '2-digit',\r\n        //   minute: '2-digit',\r\n        // })} - ${new Date(end).toLocaleTimeString([], {\r\n        //   hour: '2-digit',\r\n        //   minute: '2-digit',\r\n        // })}`,\r\n        start,\r\n        end,\r\n        cssClass: 'calendar-free-area',\r\n        meta: {\r\n          incrementsBadgeTotal: false,\r\n          showOnMonthView: false,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  reservationPlace(): void {\r\n    this._modal.create({\r\n      nzTitle: this.modalTitleTpl,\r\n      nzContent: this.modalContentTpl,\r\n      nzFooter: this.modalFooterTpl,\r\n    });\r\n  }\r\n\r\n  approveReservation() {\r\n    this._service\r\n      .reservationPlace(this.workplace.id, [\r\n        this.dateTimeFromControl.value,\r\n        this.dateTimeToControl.value,\r\n      ])\r\n      .pipe(first())\r\n      .subscribe(({ data }) => {\r\n        this._modal.closeAll();\r\n        if (data && data.length === 1) {\r\n          const main = data[0];\r\n          if (main.meta.isOk) {\r\n            this._modal\r\n              .success({\r\n                nzTitle: 'Успешно забронировано',\r\n                nzContent: main.meta.message,\r\n              })\r\n              .afterClose.subscribe(() => {\r\n                this.dataBusy.push({\r\n                  id: this.dataBusy.length,\r\n                  start: new Date(this.dateTimeFromControl.value),\r\n                  end: new Date(this.dateTimeToControl.value),\r\n                  title: `${this._translate.transform('Busy')} ${new Date(\r\n                    this.dateTimeFromControl.value\r\n                  ).toLocaleTimeString([], {\r\n                    hour: '2-digit',\r\n                    minute: '2-digit',\r\n                  })} - ${new Date(\r\n                    this.dateTimeToControl.value\r\n                  ).toLocaleTimeString([], {\r\n                    hour: '2-digit',\r\n                    minute: '2-digit',\r\n                  })}`,\r\n                  data: main,\r\n                  color: {\r\n                    primary: '#188fff',\r\n                  },\r\n                  cssClass: 'calendar-busy-area-room',\r\n                });\r\n                this.addEmptyZones();\r\n              });\r\n          } else {\r\n            this._modal.error({\r\n              nzTitle: 'Не удалось забронировать',\r\n              nzContent: main.meta.message,\r\n            });\r\n          }\r\n        } else {\r\n          this._modal.error({\r\n            nzTitle: 'Не удалось забронировать',\r\n          });\r\n        }\r\n      });\r\n  }\r\n  cancelReservation() {\r\n    this._modal.closeAll();\r\n  }\r\n\r\n  handleReservation(ev): void {\r\n    this.dateTimeFrom = ev.start;\r\n    this.dateTimeTo = ev.end;\r\n    this.dateTimeFromControl.setValue(new Date(this.dateTimeFrom));\r\n    this.dateTimeToControl.setValue(new Date(this.dateTimeTo));\r\n    this._cdr.detectChanges();\r\n    this.reservationPlace();\r\n  }\r\n\r\n  updateDateTime(dateTime: Date[]): void {\r\n    this.dateTimeFromControl.setValue(dateTime[0]);\r\n    this.dateTimeToControl.setValue(dateTime[1]);\r\n    this.wrongRange = +dateTime[0] + this.minDuration > +dateTime[1];\r\n    this._cdr.detectChanges();\r\n  }\r\n}\r\n","<app-reservation-workplace\r\n  [mode]=\"mode\"\r\n  [isLoading]=\"isLoading\"\r\n  [workplace]=\"workplace\"\r\n  [tags]=\"tags\"\r\n  [events]=\"data\"\r\n  [descriptionList]=\"descriptionList\"\r\n  (reservation)=\"handleReservation($event)\"\r\n  (monthSelect)=\"monthSelectHandler($event)\"\r\n></app-reservation-workplace>\r\n\r\n<ng-template #modalTitleTpl>\r\n  <span class=\"modal-title\">\r\n    <i nz-icon nzType=\"check-circle\"></i>{{ \"Approve reservation\" | translate }}\r\n  </span>\r\n</ng-template>\r\n\r\n<ng-template #modalFooterTpl>\r\n  <div class=\"modal-footer\">\r\n    <div *ngIf=\"wrongRange\" class=\"error\">\r\n      <span>{{ \"Minimum booking period 15 minutes\" | translate }}</span>\r\n    </div>\r\n    <button nz-button class=\"ant-btn\" (click)=\"cancelReservation()\">\r\n      <span> {{ \"Cancel\" | translate }} </span>\r\n    </button>\r\n    <button\r\n      nz-button\r\n      class=\"ant-btn ant-btn-primary\"\r\n      (click)=\"approveReservation()\"\r\n      [disabled]=\"wrongRange\"\r\n    >\r\n      <span> {{ \"Approve\" | translate }} </span>\r\n    </button>\r\n  </div>\r\n</ng-template>\r\n<ng-template #modalContentTpl>\r\n  <div class=\"modal-content info\">\r\n    <span class=\"modal-content__name\">{{ \"Place\" | translate }}: </span>\r\n    <span>{{ workplace?.name }}</span>\r\n  </div>\r\n  <div class=\"modal-content\">\r\n    <app-filter-date\r\n      [ngModel]=\"[dateTimeFromControl.value, dateTimeToControl.value]\"\r\n      [layout]=\"'horizontal'\"\r\n      [format]=\"dateTimeFormat\"\r\n      [workHours]=\"workHours\"\r\n      [minDuration]=\"minDuration\"\r\n      [allowAllDay]=\"false\"\r\n      [autoUpdateDateTo]=\"false\"\r\n      [minDateTime]=\"dateTimeFrom\"\r\n      [maxDateTime]=\"dateTimeTo\"\r\n      [staticDisabled]=\"true\"\r\n      (ngModelChange)=\"updateDateTime($event)\"\r\n    >\r\n    </app-filter-date>\r\n  </div>\r\n</ng-template>\r\n","import { DatePipe } from '@angular/common';\r\nimport { Injectable } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { DictionariesService } from '@shared/dictionaries/dictionaries.service';\r\nimport { IListRows } from '@src/app/base/list/models/list.model';\r\nimport { AppError } from '@src/app/core/models/app-errorl.model';\r\nimport { mapDictionaryValues } from '@src/app/shared/common/utils/reservations.util';\r\nimport { IStatusesMap } from '@src/app/shared/dictionaries/models/statuses.model';\r\nimport { MeasurementsService } from '@src/app/shared/dictionaries/services/measurements.service';\r\nimport { StatusesService } from '@src/app/shared/dictionaries/services/statuses.service';\r\nimport {\r\n  IAppointment,\r\n  IBuilding,\r\n  IFloor,\r\n  IRoom,\r\n  ITag,\r\n  IWorkplace,\r\n} from '@src/app/shared/http/models/database.model';\r\nimport { ReservationsApiService } from '@src/app/shared/http/services/reservations-api.service';\r\nimport { combineLatest, of } from 'rxjs';\r\nimport { BehaviorSubject, forkJoin, Observable } from 'rxjs';\r\nimport {\r\n  catchError,\r\n  filter,\r\n  map,\r\n  shareReplay,\r\n  switchMap,\r\n  tap,\r\n} from 'rxjs/operators';\r\nimport { IList, IReservationsMeta } from '../../../models/list.model';\r\n\r\n@Injectable()\r\nexport class CreateService {\r\n  private readonly _workplace$: Observable<{\r\n    workplace: IRoom;\r\n    tags: string[];\r\n    floor: IFloor;\r\n    appointments: any;\r\n    building: IBuilding;\r\n  }>;\r\n  private workplaceId: number;\r\n\r\n  constructor(\r\n    private $dictionariesService: DictionariesService,\r\n    private $reservationsApiService: ReservationsApiService,\r\n    private $statusesService: StatusesService,\r\n    private route: ActivatedRoute,\r\n    private datePipe: DatePipe,\r\n    private $measurements: MeasurementsService\r\n  ) {\r\n    this.workplaceId = +this.route.snapshot.params.workplaceId;\r\n    this._workplace$ = this.$dictionariesService\r\n      .getDictionaryItemByKey<IRoom>('rooms', this.workplaceId)\r\n      .pipe(\r\n        switchMap((p) => {\r\n          let now = new Date();\r\n          let year = new Date();\r\n          year.setFullYear(year.getFullYear() + 1);\r\n          return forkJoin({\r\n            workplace: of(p),\r\n            floor: this.$dictionariesService.getDictionaryItemByKey<IFloor>(\r\n              'floorMaps',\r\n              p.floorMapId\r\n            ),\r\n            tags: this.$dictionariesService.getDictionary<ITag[]>('tags'),\r\n            buildings:\r\n              this.$dictionariesService.getDictionary<IBuilding[]>('buildings'),\r\n            appointments: this.$reservationsApiService.getRoomAppointments({\r\n              requestAppointmentRoomId: this.workplaceId,\r\n              requestAppointmentDateFrom: this._getApiDate(now),\r\n              requestAppointmentDateTo: this._getApiDate(year),\r\n            }),\r\n          });\r\n        }),\r\n        map(({ workplace, tags, floor, appointments, buildings }) => {\r\n          let appointmentsByRoomList = [];\r\n          if (appointments && appointments.appointmentsByRoomList) {\r\n            appointmentsByRoomList = appointmentsByRoomList;\r\n          } else if (Array.isArray(appointments)) {\r\n            appointmentsByRoomList = appointments;\r\n          }\r\n          return {\r\n            workplace,\r\n            tags: getTags(workplace.tags, tags),\r\n            floor,\r\n            appointments: appointmentsByRoomList,\r\n            building: buildings.find((b) => b.id === floor.buildingId),\r\n          };\r\n        }),\r\n        shareReplay(1)\r\n      );\r\n  }\r\n\r\n  get workplace$(): Observable<{\r\n    workplace: IRoom;\r\n    tags: string[];\r\n    floor: IFloor;\r\n    appointments: any;\r\n    building: IBuilding;\r\n  }> {\r\n    return this._workplace$;\r\n  }\r\n\r\n  getWorkplace$(dateFrom: Date, dateTo: Date) {\r\n    return this.$dictionariesService\r\n      .getDictionaryItemByKey<IRoom>('rooms', this.workplaceId)\r\n      .pipe(\r\n        switchMap((p) => {\r\n          return forkJoin({\r\n            workplace: of(p),\r\n            floor: this.$dictionariesService.getDictionaryItemByKey<IFloor>(\r\n              'floorMaps',\r\n              p.floorMapId\r\n            ),\r\n            tags: this.$dictionariesService.getDictionary<ITag[]>('tags'),\r\n            buildings:\r\n              this.$dictionariesService.getDictionary<IBuilding[]>('buildings'),\r\n            appointments: this.$reservationsApiService.getRoomAppointments({\r\n              requestAppointmentRoomId: this.workplaceId,\r\n              requestAppointmentDateFrom: this._getApiDate(dateFrom),\r\n              requestAppointmentDateTo: this._getApiDate(dateTo),\r\n            }),\r\n          });\r\n        }),\r\n        map(({ workplace, tags, floor, appointments, buildings }) => {\r\n          let appointmentsByRoomList = [];\r\n          if (appointments && Array.isArray(appointments.appointmentsByRoomList)) {\r\n            appointmentsByRoomList = appointments.appointmentsByRoomList;\r\n          } else if (Array.isArray(appointments)) {\r\n            appointmentsByRoomList = appointments;\r\n          }\r\n          return {\r\n            workplace,\r\n            tags: getTags(workplace.tags, tags),\r\n            floor,\r\n            appointments: appointmentsByRoomList,\r\n            building: buildings.find((b) => b.id === floor.buildingId),\r\n          };\r\n        }),\r\n        shareReplay(1)\r\n      );\r\n  }\r\n\r\n  private _getApiDate(date: Date): string {\r\n    return this.datePipe.transform(\r\n      date,\r\n      this.$measurements.getMeasurementByName('filterDate')\r\n    );\r\n  }\r\n\r\n  public get dateTimeFormat$(): Observable<string> {\r\n    return this.$measurements.getMeasurementByName$('shortDateTime');\r\n  }\r\n\r\n  reservationPlace(id: number, dates: Date[]) {\r\n    const reservations = [\r\n      {\r\n        appointmentRoomsList: [id],\r\n        appointmentDateFrom: this._getApiDate(dates[0]),\r\n        appointmentDateTo: this._getApiDate(dates[1]),\r\n      },\r\n    ];\r\n\r\n    let params = { appointments: reservations };\r\n\r\n    return this.$reservationsApiService.putReservationsByType(\r\n      'appointment',\r\n      params\r\n    );\r\n  }\r\n}\r\nexport const getTags = (ids: number[], tags: ITag[]): string[] => {\r\n  return tags.filter((t) => ids.includes(t.id)).map((tag) => tag.name);\r\n};\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReservationWorkplaceComponent } from './reservation-workplace.component';\r\nimport { CardModule } from '../card/card.module';\r\nimport { ImagesModule } from '@src/app/shared/images/images.module';\r\nimport { CalendarModule } from '../calendar/calendar.module';\r\n\r\n@NgModule({\r\n  declarations: [ReservationWorkplaceComponent],\r\n  exports: [ReservationWorkplaceComponent],\r\n  imports: [CommonModule, CardModule, ImagesModule, CalendarModule],\r\n})\r\nexport class ReservationWorkplaceModule {}\r\n"],"sourceRoot":"webpack:///"}